<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kamiljö AB - Din professionella rörmokare</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com">
    <style>
        :root { --primary: #008751; --secondary: #1a1a1a; --light: #f4f7f6; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; color: var(--secondary); line-height: 1.6; }
        
        /* Header & Nav */
        header { background: white; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .logo img { height: 50px; }
        nav a { margin-left: 20px; text-decoration: none; color: var(--secondary); font-weight: 500; }
        .btn-emergency { background: #d32f2f; color: white; padding: 10px 20px; border-radius: 5px; font-weight: bold; }

        /* Hero Section */
        .hero { background: var(--light); padding: 80px 5%; text-align: left; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
        .hero-text { flex: 1; min-width: 300px; }
        .hero h1 { font-size: 3rem; margin-bottom: 20px; color: var(--secondary); }
        .badge { background: #e8f5e9; color: var(--primary); padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; font-weight: bold; margin-bottom: 15px; display: inline-block; }

        /* Formularz - NAJWAŻNIEJSZA SEKCJA */
        .order-box { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 500px; }
        .order-box h2 { color: var(--primary); margin-top: 0; }
        input, textarea, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; font-size: 1rem; }
        .file-upload { background: #f9f9f9; border: 2px dashed var(--primary); padding: 20px; text-align: center; cursor: pointer; }
        .btn-submit { background: var(--primary); color: white; border: none; width: 100%; padding: 15px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.3s; border-radius: 5px; }
        .btn-submit:hover { background: #006b40; transform: translateY(-2px); }

        /* Grid Sekcje */
        .section-title { text-align: center; padding: 50px 0 20px; font-size: 2rem; }
        .grid-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; padding: 0 5%; }
        .card { background: white; border: 1px solid #eee; padding: 25px; border-radius: 10px; transition: 0.3s; }
        .card:hover { border-color: var(--primary); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        /* Listy (30 usług, 54 miejscowości) */
        .list-columns { column-count: 3; column-gap: 40px; padding: 0 5% 50px; }
        .list-columns li { margin-bottom: 8px; list-style: none; position: relative; padding-left: 20px; }
        .list-columns li::before { content: "✓"; position: absolute; left: 0; color: var(--primary); font-weight: bold; }

        @media (max-width: 768px) { .list-columns { column-count: 1; } .hero h1 { font-size: 2rem; } }
    </style>
</head>
<body>

<header>
    <div class="logo"><strong>KAMILJÖ AB</strong></div>
    <nav>
        <a href="#tjanster">Tjänster</a>
        <a href="#om-oss">Om oss</a>
        <a href="#kontakt" class="btn-emergency">Jour 24/7</a>
    </nav>
</header>

<section class="hero">
    <div class="hero-text">
        <span class="badge">★★★★★ 5.0 Verifierade omdömen</span>
        <h1>Din professionella rörmokare i Ludvika</h1>
        <p>Gratis offert inom 24h. Vi hjälper dig med allt inom VVS.</p>
        <div style="font-size: 1.5rem; font-weight: bold;">+46 762 124 124</div>
    </div>

    <!-- FORMULARZ DO GOOGLE DRIVE -->
    <div class="order-box" id="kontakt">
        <h2>Boka Hydraulika</h2>
        <form id="vvsForm">
            <input type="text" name="clientName" placeholder="Imię i Nazwisko" required>
            <input type="tel" name="phone" placeholder="Telefon" required>
            <div style="display:flex; gap:10px;">
                <input type="date" name="date" required>
                <input type="time" name="time" required>
            </div>
            <select name="serviceType">
                <option value="Awarja">Akut Awaria (Jour)</option>
                <option value="Instalacja">Nowa Instalacja</option>
                <option value="Konserwacja">Konserwacja</option>
            </select>
            <textarea name="desc" placeholder="Opisz zlecenie..." rows="3"></textarea>
            
            <div class="file-upload">
                <input type="file" id="fileInput" name="files" multiple style="display:none">
                <label for="fileInput"><i class="fa fa-cloud-upload"></i> Załącz zdjęcia awarii (dowolne pliki)</label>
            </div>
            <div id="fileList" style="font-size: 0.8rem; margin: 5px 0;"></div>
            
            <button type="submit" class="btn-submit" id="submitBtn">WYŚLIJ ZGŁOSZENIE</button>
        </form>
    </div>
</section>

<h2 class="section-title">Nasze Usługi</h2>
<div class="list-columns" id="uslugi">
    <!-- Tu JavaScript wstrzyknie 30 usług -->
</div>

<h2 class="section-title">Gdzie dojeżdżamy (54 miejscowości)</h2>
<div class="list-columns" id="miejsca">
    <!-- Tu JavaScript wstrzyknie 54 miejscowości -->
</div>

<h2 class="section-title">Realizacje (Instagram)</h2>
<div id="instagram-feed" style="padding: 0 5%; text-align: center;">
    <p>Zdjęcia ładowane bezpośrednio z Instagrama...</p>
    <!-- Tu wstaw kod widgetu np. Behold.so lub LightWidget -->
</div>

<script>
    // LISTY DANYCH (Czysty JS - brak zamulania strony)
    const uslugiData = ["Installation av vask", "Byte av toalett", "Värmepumpservice", "Stambyte", "Golvvärme", "Rördragning", "Blandarbyte", "Akut läcka", "Radiatorservice", "Pannbyte", "Hydroforbyte", "Varmvattenberedare", "Avloppsrensning", "Badrumsrenovering", "Kökstjänster", "Vattenrening", "Cirkulationspumpar", "Ventilbyte", "Expansionskärl", "Brunnspumpar", "Läckagesökning", "Rörisolering", "Vattenmätarbyte", "Utekranar", "Diskmaskinsmontage", "Tvättmaskinsmontage", "Golvbrunnar", "Spolning av rör", "Backventiler", "Termostatbyte"];
    const miejscaData = ["Ludvika", "Borlänge", "Falun", "Smedjebacken", "Grängesberg", "Sunnansjö", "Fredriksberg", "Nyhammar", "Saxdalen", "Gonäs", "Blötberget", "Håksberg", "Sörvik", "Persbo", "Marnäs", "Björbo", "Dala-Floda", "Gagnef", "Mockfjärd", "Säter", "Hedemora", "Avesta", "Krylbo", "Horndal", "Fors", "Långshyttan", "Vikmanshyttan", "Garpenberg", "Söderbärke", "Mora", "Orsa", "Rättvik", "Leksand", "Insjön", "Tällberg", "Siljansnäs", "Vansbro", "Malung", "Sälen", "Idre", "Älvdalen", "Särna", "Djurås", "Dala-Järna", "Enviken", "Svärdsjö", "Linghed", "Boda", "Furudal", "Fryksås", "Grangärde", "Björsjö", "Hagge", "Morgårdshammar"];

    // Renderowanie list
    const fillList = (id, data) => {
        const el = document.getElementById(id);
        data.forEach(item => {
            const li = document.createElement('li');
            li.innerText = item;
            el.appendChild(li);
        });
    }
    fillList('uslugi', uslugiData);
    fillList('miejsca', miejscaData);

    // OBSŁUGA FORMULARZA + GOOGLE DRIVE
    document.getElementById('vvsForm').onsubmit = async (e) => {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.innerText = "WYSYŁANIE DO TWOJEGO DYSKU...";
        btn.disabled = true;

        const files = document.getElementById('fileInput').files;
        let fileData = [];

        // Konwersja plików
        for (let file of files) {
            const reader = new FileReader();
            const promise = new Promise(res => {
                reader.onload = (e) => res({
                    base64: e.target.result.split(',')[1],
                    type: file.type,
                    name: file.name
                });
            });
            reader.readAsDataURL(file);
            fileData.push(await promise);
        }

        const payload = {
            name: e.target.clientName.value,
            phone: e.target.phone.value,
            date: e.target.date.value,
            time: e.target.time.value,
            service: e.target.serviceType.value,
            desc: e.target.desc.value,
            files: fileData
        };

        // Tu wklej swój Web App URL z Google Apps Script
        const SCRIPT_URL = 'TU_WKLEJ_URL_Z_GOOGLE_APPS_SCRIPT';

        try {
            await fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // Ważne przy Google Apps Script
                body: JSON.stringify(payload)
            });
            alert("SUKCES! Zgłoszenie i pliki zapisane na Twoim Google Drive.");
            e.target.reset();
        } catch (err) {
            alert("Błąd wysyłki. Sprawdź połączenie z Google API.");
        } finally {
            btn.innerText = "WYŚLIJ ZGŁOSZENIE";
            btn.disabled = false;
        }
    };

    // Podgląd wybranych plików
    document.getElementById('fileInput').onchange = (e) => {
        document.getElementById('fileList').innerText = `Wybrano plików: ${e.target.files.length}`;
    };
</script>

</body>
</html>
