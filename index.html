<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kamilj√∂ AB | R√∂rmokare Ludvika</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .hero-gradient { background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%); }
        .service-card { transition: all 0.3s ease; border: 1px solid #e2e8f0; }
        .service-card:hover { transform: translateY(-5px); border-color: #22c55e; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); }
        #map { height: 400px; border-radius: 1rem; z-index: 1; }
        .lang-active { background-color: #166534; color: white; }
    </style>
</head>
<body class="antialiased">

    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-100">
        <div class="max-w-7xl mx-auto px-4 h-20 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <img src="logo.jpeg" alt="Kamilj√∂ AB" class="h-10 sm:h-12" onerror="this.src='public/logo.jpeg'">
                <span class="font-bold text-xl uppercase tracking-tighter">Kamilj√∂ <span class="text-green-600">AB</span></span>
            </div>
            
            <div class="hidden lg:flex gap-8 font-semibold text-sm uppercase">
                <a href="#hem" class="hover:text-green-600 transition" data-sv="Hem" data-en="Home">Hem</a>
                <a href="#tjanster" class="hover:text-green-600 transition" data-sv="Tj√§nster" data-en="Services">Tj√§nster</a>
                <a href="#om-oss" class="hover:text-green-600 transition" data-sv="Om oss" data-en="About">Om oss</a>
                <a href="#kontakt" class="hover:text-green-600 transition" data-sv="Kontakt" data-en="Contact">Kontakt</a>
            </div>

            <div class="flex items-center gap-4">
                <div class="flex border rounded-lg overflow-hidden text-[10px] font-bold">
                    <button id="svBtn" onclick="setLanguage('sv')" class="lang-active px-3 py-1 uppercase">SV</button>
                    <button id="enBtn" onclick="setLanguage('en')" class="bg-slate-100 px-3 py-1 text-slate-400 uppercase">EN</button>
                </div>
                <a href="tel:+46762124124" class="bg-red-600 text-white px-4 py-2 rounded-lg font-black text-sm uppercase animate-pulse shadow-lg">
                    Jour 24/7
                </a>
            </div>
        </div>
    </nav>

    <header id="hem" class="hero-gradient py-16 md:py-24 px-4 overflow-hidden">
        <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 items-center">
            <div class="space-y-6">
                <div class="inline-flex items-center gap-2 bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold">
                    ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0 Google Reviews
                </div>
                <h1 class="text-4xl md:text-6xl font-extrabold text-slate-900 leading-tight tracking-tighter" data-sv="Din professionella r√∂rmokare i Ludvika ‚Äì Kamilj√∂ AB" data-en="Your Professional Plumber in Ludvika ‚Äì Kamilj√∂ AB">
                    Din professionella r√∂rmokare i Ludvika ‚Äì Kamilj√∂ AB
                </h1>
                <p class="text-2xl font-bold text-green-700" data-sv="Gratis offert inom 24h" data-en="Free quote within 24h">Gratis offert inom 24h</p>
                <div class="flex flex-col sm:flex-row gap-4 pt-4">
                    <a href="#kontakt" class="bg-green-700 text-white px-8 py-4 rounded-xl font-bold text-lg hover:bg-green-800 transition shadow-xl text-center" data-sv="Beg√§r offert" data-en="Request quote">Beg√§r offert</a>
                    <a href="tel:+46762124124" class="bg-white border-2 border-slate-200 text-slate-700 px-8 py-4 rounded-xl font-bold text-lg hover:bg-slate-50 transition text-center shadow-sm">+46 762 124 124</a>
                </div>
            </div>
            <div class="flex justify-center lg:justify-end">
                <div class="bg-white p-6 rounded-[2.5rem] shadow-2xl border border-slate-50 max-w-[320px] text-center">
                    <img src="qr-maps.png" alt="QR" class="w-full rounded-2xl mb-4" onerror="this.src='public/qr-maps.png'">
                    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest italic" data-sv="Skanna f√∂r kontakt & karta" data-en="Scan for contact & map">Skanna f√∂r kontakt & karta</p>
                </div>
            </div>
        </div>
    </header>

    <section id="tjanster" class="py-20 px-4 bg-white">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl font-extrabold text-center mb-4 uppercase italic tracking-tighter" data-sv="V√•ra Tj√§nster" data-en="Our Services">V√•ra Tj√§nster</h2>
            <p class="text-center text-slate-400 font-medium mb-16 italic" data-sv="Professionella VVS-tj√§nster i Ludvika och hela Dalarna!" data-en="Professional VVS services in Ludvika and all of Dalarna!">Professionella VVS-tj√§nster i Ludvika och hela Dalarna!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="service-card p-8 bg-slate-50 rounded-3xl">
                    <div class="text-3xl mb-4">üîß</div>
                    <h3 class="text-xl font-bold mb-3 uppercase" data-sv="Installation & Inkoppling" data-en="Installation & Connection">Installation & Inkoppling</h3>
                    <p class="text-sm text-slate-500 font-medium leading-relaxed" data-sv="Installation av vask, tv√§ttst√§ll, dusch, toalett och blandare." data-en="Installation of sinks, washbasins, showers, toilets and faucets.">Installation av vask, tv√§ttst√§ll, dusch, toalett och blandare.</p>
                </div>
                <div class="service-card p-8 bg-slate-50 rounded-3xl">
                    <div class="text-3xl mb-4">üî•</div>
                    <h3 class="text-xl font-bold mb-3 uppercase" data-sv="V√§rme & Pannor" data-en="Heating & Boilers">V√§rme & Pannor</h3>
                    <p class="text-sm text-slate-500 font-medium leading-relaxed" data-sv="Installation och byte av pannor, radiatorer (element) och v√§rmesystem." data-en="Installation and replacement of boilers, radiators (elements) and heating systems.">Installation och byte av pannor, radiatorer (element) och v√§rmesystem.</p>
                </div>
                <div class="service-card p-8 bg-slate-50 rounded-3xl">
                    <div class="text-3xl mb-4">‚ôªÔ∏è</div>
                    <h3 class="text-xl font-bold mb-3 uppercase" data-sv="Komponentbyte" data-en="Component Replacement">Komponentbyte</h3>
                    <p class="text-sm text-slate-500 font-medium leading-relaxed" data-sv="Byte av varmvattenberedare, v√§rmev√§xlare och hydroforer." data-en="Replacement of water heaters, heat exchangers and hydrophones.">Byte av varmvattenberedare, v√§rmev√§xlare och hydroforer.</p>
                </div>
                <div class="service-card p-8 bg-slate-50 rounded-3xl">
                    <div class="text-3xl mb-4">üè†</div>
                    <h3 class="text-xl font-bold mb-3 uppercase" data-sv="Nyinstallation" data-en="New Installation">Nyinstallation</h3>
                    <p class="text-sm text-slate-500 font-medium leading-relaxed" data-sv="Kompletta VVS-installationer f√∂r nya maskiner i hemmet." data-en="Complete VVS installations for new machines in the home.">Kompletta VVS-installationer f√∂r nya maskiner i hemmet.</p>
                </div>
                <div class="service-card p-8 bg-slate-100 rounded-3xl border-green-200">
                    <div class="text-3xl mb-4">üí°</div>
                    <h3 class="text-xl font-bold mb-3 uppercase" data-sv="Innovativa l√∂sningar" data-en="Innovative Solutions">Innovativa l√∂sningar</h3>
                    <p class="text-sm text-slate-500 font-bold italic leading-relaxed text-green-800" data-sv="Egenutvecklade innovativa l√∂sningar f√∂r husuppv√§rmning baserade p√• kavitations¬≠teknik." data-en="Self-developed innovative solutions for home heating based on cavitation technology.">Egenutvecklade innovativa l√∂sningar dla husuppv√§rmning baserade na kavitations¬≠teknik.</p>
                    <span class="inline-block mt-4 text-[10px] font-black bg-green-200 text-green-800 px-2 py-1 rounded">USP</span>
                </div>
            </div>
        </div>
    </section>

    <section class="py-20 px-4 bg-slate-50">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-12 uppercase italic" data-sv="V√•rt Serviceomr√•de (Ludvika + 30km)" data-en="Our Service Area (Ludvika + 30km)">V√•rt Serviceomr√•de (Ludvika + 30km)</h2>
            <div id="map"></div>
        </div>
    </section>

    <section id="kontakt" class="py-20 px-4">
        <div class="max-w-3xl mx-auto">
            <div class="bg-white p-8 md:p-12 rounded-[2.5rem] shadow-2xl border border-slate-100">
                <h2 class="text-4xl font-black text-center mb-8 uppercase italic" data-sv="Kontakta oss" data-en="Contact us">Kontakta oss</h2>
                
                <form id="vvsForm" class="space-y-5">
                    <div class="grid md:grid-cols-2 gap-4">
                        <input type="text" name="name" required class="w-full p-4 bg-slate-50 rounded-xl outline-none focus:ring-2 focus:ring-green-500" data-placeholder-sv="Namn *" data-placeholder-en="Name *" placeholder="Namn *">
                        <input type="tel" name="phone" required class="w-full p-4 bg-slate-50 rounded-xl outline-none focus:ring-2 focus:ring-green-500" data-placeholder-sv="Telefon *" data-placeholder-en="Phone *" placeholder="Telefon *">
                    </div>
                    <input type="email" name="email" required class="w-full p-4 bg-slate-50 rounded-xl outline-none focus:ring-2 focus:ring-green-500" data-placeholder-sv="E-post *" data-placeholder-en="Email *" placeholder="E-post *">
                    
                    <select name="service" required class="w-full p-4 bg-slate-50 rounded-xl outline-none focus:ring-2 focus:ring-green-500 font-bold">
                        <option value="" disabled selected data-sv="V√§lj tj√§nst" data-en="Select service">V√§lj tj√§nst</option>
                        <option value="Installation">Installation</option>
                        <option value="Varme">V√§rme & Pannor</option>
                        <option value="Service">Komponentbyte</option>
                        <option value="Innovation">Innovativa l√∂sningar</option>
                    </select>

                    <input type="datetime-local" name="date" required class="w-full p-4 bg-slate-50 rounded-xl outline-none focus:ring-2 focus:ring-green-500 font-bold">

                    <textarea name="message" required class="w-full p-4 bg-slate-50 rounded-xl h-32 outline-none focus:ring-2 focus:ring-green-500" data-placeholder-sv="Beskriv ditt √§rende..." data-placeholder-en="Describe your case..." placeholder="Beskriv ditt √§rende..."></textarea>
                    
                    <div class="p-4 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50">
                        <p class="text-xs font-bold text-slate-400 mb-2 uppercase tracking-widest" data-sv="Bifoga bilder (Max 500MB/fil)" data-en="Attach images (Max 500MB/file)">Bifoga bilder (Max 500MB/fil)</p>
                        <input type="file" name="files" id="fileInput" multiple class="w-full text-sm font-bold text-slate-500">
                    </div>

                    <button type="submit" id="submitBtn" class="w-full bg-green-700 text-white py-5 rounded-xl font-black text-xl uppercase shadow-lg shadow-green-100 hover:scale-[1.02] transition">
                        <span data-sv="Skicka f√∂rfr√•gan" data-en="Send Request">Skicka f√∂rfr√•gan</span>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <footer class="py-12 bg-slate-900 text-white text-center px-4">
        <img src="logo.jpeg" alt="Logo" class="h-10 mx-auto mb-6 bg-white p-1 rounded" onerror="this.src='public/logo.jpeg'">
        <p class="font-bold text-lg mb-2 uppercase tracking-tighter italic">Kamilj√∂ AB</p>
        <p class="text-xs opacity-50 uppercase tracking-widest mb-6">Org.nr: 559572-5366 | Skogsrundan 8A, Ludvika</p>
        <p class="text-[10px] opacity-30 uppercase tracking-[0.4em]">¬© 2026 Kamilj√∂ AB. Alla r√§ttigheter f√∂rbeh√•llna.</p>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Language Logic
        function setLanguage(lang) {
            document.querySelectorAll('[data-sv]').forEach(el => {
                el.innerText = lang === 'sv' ? el.getAttribute('data-sv') : el.getAttribute('data-en');
            });
            document.querySelectorAll('[data-placeholder-sv]').forEach(el => {
                el.placeholder = lang === 'sv' ? el.getAttribute('data-placeholder-sv') : el.getAttribute('data-placeholder-en');
            });
            document.getElementById('svBtn').className = lang === 'sv' ? 'lang-active px-3 py-1 uppercase' : 'bg-slate-100 px-3 py-1 text-slate-400 uppercase';
            document.getElementById('enBtn').className = lang === 'en' ? 'lang-active px-3 py-1 uppercase' : 'bg-slate-100 px-3 py-1 text-slate-400 uppercase';
        }

        // Map Logic (Ludvika + 30km circle)
        const map = L.map('map').setView([60.148, 15.187], 9);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        L.marker([60.148, 15.187]).addTo(map).bindPopup('<b>Kamilj√∂ AB</b><br>Ludvika');
        L.circle([60.148, 15.187], { color: 'green', fillColor: '#22c55e', fillOpacity: 0.1, radius: 30000 }).addTo(map);
        // Additional markers
        [[60.484, 15.434, 'Borl√§nge'], [60.606, 15.635, 'Falun'], [60.141, 15.414, 'Smedjebacken']].forEach(pos => {
            L.circleMarker([pos[0], pos[1]], { radius: 5, color: 'darkgreen' }).addTo(map).bindPopup(pos[2]);
        });

        // Form Submission Logic
        const form = document.getElementById('vvsForm');
        const submitBtn = document.getElementById('submitBtn');

        form.onsubmit = async (e) => {
            e.preventDefault();
            submitBtn.disabled = true;
            submitBtn.innerText = "S√§nder... / Sending...";

            const formData = new FormData();
            const files = document.getElementById('fileInput').files;

            // Dane tekstowe
            formData.append('name', form.name.value);
            formData.append('phone', form.phone.value);
            formData.append('email', form.email.value);
            formData.append('service', form.service.value);
            formData.append('date', form.date.value);
            formData.append('message', form.message.value);

            // Pliki zamieniamy na Base64 dla Apps Script (ograniczenie fetch body w GAS)
            const filePromises = Array.from(files).map(file => {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = () => resolve({
                        name: file.name,
                        type: file.type,
                        data: reader.result.split(',')[1]
                    });
                    reader.readAsDataURL(file);
                });
            });

            const encodedFiles = await Promise.all(filePromises);
            formData.append('fileData', JSON.stringify(encodedFiles));

            try {
                // TUTAJ WKLEJ URL SWOJEGO SKRYPTU GOOGLE APPS SCRIPT
                const scriptURL = "TWOJ_GOOGLE_APPS_SCRIPT_URL_TUTAJ";
                
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                alert(result.message);
                form.reset();
            } catch (error) {
                console.error('Error!', error.message);
                alert('Ett fel uppstod. F√∂rs√∂k igen. / An error occurred. Try again.');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerText = "Skicka f√∂rfr√•gan / Send Request";
            }
        };
    </script>
</body>
</html>
